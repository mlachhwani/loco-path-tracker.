<!DOCTYPE html>
<html>
<head>
    <title>SECR AUDIT TOOL - STAGE 02 FINAL</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        body { margin: 0; font-family: 'Segoe UI', Arial; display: flex; height: 100vh; background: #f0f2f5; }
        #sidebar { width: 320px; background: #002f6c; color: white; padding: 20px; z-index: 1000; box-shadow: 2px 0 10px rgba(0,0,0,0.5); overflow-y: auto; }
        #map { flex-grow: 1; background: #ddd; position: relative; }
        .speed-tag { background: white; border: 1px solid #d32f2f; color: #d32f2f; font-size: 10px; font-weight: bold; padding: 1px 3px; border-radius: 2px; text-align: center; }
        select, input, button { width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 5px; border: none; font-weight: bold; box-sizing: border-box; }
        button { color: white; cursor: pointer; font-size: 14px; transition: 0.3s; text-transform: uppercase; }
        button:hover { opacity: 0.9; transform: scale(1.02); }
        #log { font-size: 12px; color: #acc6e6; margin-top: 10px; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 4px; border-left: 3px solid #ffc107; }
        #speed-dash {
            position: absolute; top: 15px; right: 15px; background: rgba(0,0,0,0.85);
            color: #00ff00; padding: 15px; border-radius: 10px; border: 2px solid #444;
            z-index: 2000; font-family: 'Courier New', monospace; min-width: 150px; text-align: center;
        }
    </style>
</head>
<body>

<div id="speed-dash">
    <div style="font-size: 11px; color: #ccc;">LIVE TRACKING</div>
    <div id="live-speed" style="font-size: 36px; font-weight: bold;">00.0</div>
    <div id="live-time" style="font-size: 16px; color: #00ff00; margin-top: 5px;">--:--:--</div>
    <div style="font-size: 11px; color: #ccc;">KMPH / IST</div>
</div>

<div id="sidebar">
    <h2 style="border-bottom: 2px solid #ffc107; padding-bottom: 10px; font-size: 20px;">SECR AUDIT TOOL</h2>
    
    <label>FROM STATION</label><select id="s_from"></select>
    <label>TO STATION</label><select id="s_to"></select>
    <label>RTIS DATA (CSV)</label><input type="file" id="csv_file">
    
    <button onclick="generateLiveMap()" style="background: #28a745; margin-top: 10px;">1. Generate Map</button>
    <button onclick="downloadExcelAudit()" style="background: #007bff;">2. Generate Report (Excel)</button>
    <button onclick="saveInteractiveWebReport()" style="background: #ffc107; color: #000;">3. Save Interactive Report</button>
    
    <div id="log">System Ready. Dashboard Mode.</div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="mapping.js"></script>
<script src="report.js"></script>

</body>
</html>
